<div
  class="chat-box"
  [ngClass]="{ 'my-light-theme': !themeDark, 'my-dark-theme': themeDark }"
>

  <div class="header" fxLayout="row">
    <div class="img-wrapper" (click)="openImageDialog()">
      <img [src]="avatar" alt="avatar" />
    </div>
    <div fxLayout="column">
      <span class="name">{{ contact.name }}</span>
      <span class="status">{{
        isWritting ? "📝 Writing ..." : contact.status
      }}</span>
    </div>
    <div fxLayout="row" fxFlex="100" fxLayoutAlign="end center" class="header-actions">
      <button mat-icon-button><mat-icon class="icon">phone</mat-icon></button>
      <button mat-icon-button><mat-icon class="icon">more_vert</mat-icon></button>
    </div>
    
  </div>
  <div class="content-chat" id="content-chat" [style]="getColor()">
    <div class="messages-content" id="messages-content" [style]="getBg()">
      <app-chat-message
        *ngFor="let message of chatMessagesList; let i = index"
        [text]="message.text"
        [time]="message.time"
        [author]="message.author"
        [equalDate]="
          chatMessagesList[i].createdAt.substring(0, 10) ===
          chatMessagesList[i - 1]?.createdAt.substring(0, 10)
        "
        [date]="message.createdAt.substring(0, 10)"
      ></app-chat-message>
    </div>
  </div>

  <div class="parent-input">
    <emoji-mart
      *ngIf="isEmojiPickerVisible"
      class="emoji-mart"
      (emojiSelect)="addEmoji($event)"
      title="Choose it!"
      emoji="point_up"
      color="#e0a963"
    ></emoji-mart>
    <div class="input-box" fxLayoutAlign="center center">
      <button class="audio-button"
        mat-mini-fab
        class="audio-button"
      >
        <mat-icon style="color: white;" >keyboard_voice</mat-icon>
      </button>
      <button
        class="emoji-button"
        mat-icon-button
        (click)="isEmojiPickerVisible = !isEmojiPickerVisible"
        fxLayoutAlign="center center"
      >
        😀
      </button>
      <form fxFlex="100" fxLayout="row" [formGroup]="entityForm">
        <input
          matInput
          class="input"
          placeholder="Type a message"
          type="text"
          name="textarea"
          [(ngModel)]="textArea"
          formControlName="input"
          (focus)="onFocus()"
          (blur)="onNotFocus()"
        />

        <button mat-icon-button class="send-button" (click)="sendMessage()">
          <mat-icon class="icon">send</mat-icon>
        </button>
      </form>
    </div>
  </div>
</div>
